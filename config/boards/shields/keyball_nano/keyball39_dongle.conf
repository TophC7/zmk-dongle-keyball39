# SAFETY FIRST - Dongle Configuration for nice!nano v2
# This configuration is specifically for a USB dongle (no physical keys)

# Core split configuration - REQUIRED for dongle
CONFIG_ZMK_SPLIT=y
CONFIG_ZMK_SPLIT_ROLE_CENTRAL=y

# BLE Configuration
CONFIG_ZMK_BLE=y
CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=n

# SAFETY: Ensure no matrix scanning happens (dongle has no keys)
CONFIG_ZMK_KSCAN_MOCK_DRIVER=n

# Power Management
CONFIG_ZMK_EXT_POWER=y
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# Disable deep sleep on dongle (always powered via USB)
CONFIG_ZMK_SLEEP=n
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=0

# Connection stability
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12
CONFIG_BT_BUF_ACL_TX_SIZE=251
CONFIG_BT_BUF_ACL_RX_SIZE=251
CONFIG_BT_L2CAP_TX_MTU=251

# Enable USB output - REQUIRED for dongle
CONFIG_ZMK_USB=y
CONFIG_USB_DEVICE_STACK=y

# SAFETY: Use generic VID/PID to avoid conflicts
# These are commonly used test VID/PID values
CONFIG_USB_DEVICE_VID=0x1209
CONFIG_USB_DEVICE_PID=0x0001
CONFIG_USB_DEVICE_MANUFACTURER="Keyball39"
CONFIG_USB_DEVICE_PRODUCT="Keyball39 Dongle"

# SAFETY: Disable features that could cause issues
CONFIG_ZMK_DISPLAY=n
CONFIG_ZMK_WIDGET_BATTERY_STATUS=n
CONFIG_ZMK_WIDGET_OUTPUT_STATUS=n
CONFIG_ZMK_WIDGET_LAYER_STATUS=n

# Logging (disabled for safety - enable only for debugging)
CONFIG_ZMK_USB_LOGGING=n

# SAFETY: Ensure bootloader protection
CONFIG_BUILD_OUTPUT_UF2=y